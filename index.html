<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bunyamin ONAL - Peintre en Bâtiment</title>
    <meta name="description"
        content="Peintre en bâtiment professionnel. Peinture intérieure, extérieure, rénovation. Devis gratuit.">

    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css" />
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#home">
                <i class="fas fa-paint-roller me-2"></i>
                Acem Peinture
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#home">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#Apropos">À Propos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#Prestations">Prestations</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#Avis">Avis Clients</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section id="home" class="section1">
        <div class="container">
            <h1>Votre Peintre de Confiance</h1>
            <p>Peinture intérieure et extérieure • Rénovation • Finitions soignées</p>
        </div>
    </section>

    <!-- Section a propos  -->
    <section id="Apropos" class="page-section">
        <div class="container">
            <div class="section-title">
                <h2>À Propos</h2>
            </div>
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <img src="https://via.placeholder.com/500x400/2c3e50/ffffff?text=Photo+Profil"
                        class="img-fluid rounded" alt="Bunyamin ONAL">
                </div>
                <div class="col-lg-6">
                    <h3>Bunyamin ONAL</h3>
                    <p class="lead">Artisan peintre depuis plus de 17 ans</p>
                    <p>Passionné par mon métier, je vous accompagne dans tous vos projets de peinture et de rénovation.
                        Mon expertise et mon savoir-faire garantissent des finitions impeccables pour votre intérieur
                        comme pour votre extérieur.</p>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-check text-success me-2"></i>17 ans d'expérience</li>
                        <li><i class="fas fa-check text-success me-2"></i>Artisan certifié</li>
                        <li><i class="fas fa-check text-success me-2"></i>Devis gratuit</li>
                        <li><i class="fas fa-check text-success me-2"></i>Garantie décennale</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Services  -->
    <section id="Prestations" class="page-section" style="background-color: var(--bg-light);">
        <div class="container">
            <div class="section-title">
                <h2>Nos Prestations</h2>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card">
                        <i class="fas fa-home"></i>
                        <h4>Peinture Intérieure</h4>
                        <p>Peinture de vos murs, plafonds, boiseries. Préparation des supports, enduits, finitions.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card">
                        <i class="fas fa-building"></i>
                        <h4>Peinture Extérieure</h4>
                        <p>Ravalement de façades, peinture de volets, portails. Protection et embellissement de votre
                            bien.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card">
                        <i class="fas fa-tools"></i>
                        <h4>Rénovation</h4>
                        <p>Remise en état complet, réparation des supports, modernisation de vos espaces.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card">
                        <i class="fas fa-palette"></i>
                        <h4>Décoration</h4>
                        <p>Techniques décoratives, effets spéciaux, conseils personnalisés pour votre intérieur.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card">
                        <i class="fas fa-brush"></i>
                        <h4>Papier Peint</h4>
                        <p>Pose de papier peint, préparation des murs, finitions soignées.</p>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="service-card">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Traitement Bois</h4>
                        <p>Protection et traitement des boiseries, lasures, vernis, entretien.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section avis  -->
    <section id="Avis" class="page-section">
        <div class="container">
            <div class="section-title text-center">
                <h2>Laissez un avis</h2>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <form id="form-avis" action="ajouter-avis.php" method="POST" class="mb-4">
                        <div class="mb-3">
                            <input type="text" class="form-control" name="nom" placeholder="Votre nom" required>
                        </div>
                        <div class="mb-3">
                            <textarea class="form-control" name="message" placeholder="Votre avis" rows="6"
                                required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Envoyer</button>
                        <div id="message-confirmation" class="mt-3 text-success"></div>
                        <input type="text" name="website" style="display:none">
                    </form>

                    <h3 class="mt-5 mb-3">Avis des clients</h3>
                    <div id="liste-avis"></div>
                    <nav>
                        <ul id="pagination" class="pagination justify-content-center mt-4"></ul>
                    </nav>

                    <script>
                        let avisData = [];
                        const avisParPage = 5;
                        let pageActuelle = 1;

                        // Récupérer tous les avis
                        fetch('avis.php')
                            .then(res => res.json())
                            .then(data => {
                                avisData = data;
                                afficherPage(pageActuelle);
                                afficherPagination();
                            });

                        // Affiche les avis d'une page donnée
                        function afficherPage(page) {
                            const debut = (page - 1) * avisParPage;
                            const fin = debut + avisParPage;
                            const avisPage = avisData.slice(debut, fin);

                            const container = document.getElementById('liste-avis');
                            container.innerHTML = '';

                            avisPage.forEach(avis => {
                                const div = document.createElement('div');
                                div.className = "avis border rounded p-3 mb-3 shadow-sm";
                                const date = new Date(avis.date_creation).toLocaleDateString('fr-FR');
                                div.innerHTML = `
                                    <strong>${avis.nom}</strong> <em>(${date})</em>
                                    <p style="white-space: pre-line;">${avis.message}</p>`;
                                container.appendChild(div);
                            });
                        }

                        // Créer les boutons de pagination
                        function afficherPagination() {
                            const totalPages = Math.ceil(avisData.length / avisParPage);
                            const pagination = document.getElementById('pagination');
                            pagination.innerHTML = '';

                            const createPageItem = (num, isActive = false) => {
                                const li = document.createElement('li');
                                li.className = `page-item${isActive ? ' active' : ''}`;
                                const btn = document.createElement('button');
                                btn.className = 'page-link';
                                btn.textContent = num;
                                btn.addEventListener('click', () => {
                                    pageActuelle = num;
                                    afficherPage(pageActuelle);
                                    afficherPagination();
                                });
                                li.appendChild(btn);
                                return li;
                            };

                            const createEllipsis = () => {
                                const li = document.createElement('li');
                                li.className = 'page-item disabled';
                                li.innerHTML = `<span class="page-link">…</span>`;
                                return li;
                            };

                            if (totalPages <= 7) {
                                // Affiche toutes les pages si peu nombreuses
                                for (let i = 1; i <= totalPages; i++) {
                                    pagination.appendChild(createPageItem(i, i === pageActuelle));
                                }
                            } else {
                                // Toujours afficher la 1ère page
                                pagination.appendChild(createPageItem(1, pageActuelle === 1));

                                let startPage = Math.max(2, pageActuelle - 2);
                                let endPage = Math.min(totalPages - 1, pageActuelle + 2);

                                if (startPage > 2) {
                                    pagination.appendChild(createEllipsis());
                                }

                                for (let i = startPage; i <= endPage; i++) {
                                    pagination.appendChild(createPageItem(i, i === pageActuelle));
                                }

                                if (endPage < totalPages - 1) {
                                    pagination.appendChild(createEllipsis());
                                }

                                // Toujours afficher la dernière page
                                pagination.appendChild(createPageItem(totalPages, pageActuelle === totalPages));
                            }
                        }

                        // Envoi du formulaire + mise à jour des avis
                        document.getElementById('form-avis').addEventListener('submit', function (e) {
                            e.preventDefault();
                            const form = e.target;
                            const formData = new FormData(form);

                            fetch('ajouter-avis.php', {
                                method: 'POST',
                                body: formData
                            })
                                .then(res => {
                                    if (res.ok) {
                                        document.getElementById('message-confirmation').textContent = "Merci pour votre avis !";
                                        form.reset();

                                        // Ajout en local
                                        const nouvelAvis = {
                                            nom: formData.get("nom"),
                                            message: formData.get("message"),
                                            date_creation: new Date()
                                        };

                                        avisData.unshift(nouvelAvis);
                                        pageActuelle = 1;
                                        afficherPage(pageActuelle);
                                        afficherPagination();
                                    } else {
                                        document.getElementById('message-confirmation').textContent = "Erreur lors de l'envoi.";
                                    }
                                })
                                .catch(() => {
                                    document.getElementById('message-confirmation').textContent = "Erreur réseau.";
                                });
                        });
                    </script>

                </div>
            </div>
        </div>
    </section>
</body>

<!-- Footer -->
<footer>
    <div id="contact" class="container">
        <div class="row">
            <div class="col-lg-4">
                <h5>Acem Peinture</h5>
                <p>Artisan peintre professionnel depuis 17 ans. Votre satisfaction est notre priorité.</p>
            </div>
            <div class="col-lg-4">
                <h5>Services</h5>
                <ul class="list-unstyled">
                    <li>Peinture intérieure</li>
                    <li>Peinture extérieure</li>
                    <li>Rénovation</li>
                    <li>Décoration</li>
                </ul>
            </div>
            <div class="col-lg-4">
                <h5>Contact</h5>
                <p>
                    <i class="fas fa-phone me-2"></i> 06 58 52 21 47<br>
                    <i class="fas fa-envelope me-2"></i> acembunyas@outlook.fr
                </p>
            </div>
        </div>
        <hr class="my-4">
        <div class="text-center">
            <p>&copy; 2025 Acem Peinture. Tous droits réservés.</p>
        </div>
    </div>
</footer>

</html>